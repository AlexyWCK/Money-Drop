<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Money Drop - Menu</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
</head>
<body class="md-bg md-home-bg">
  <video class="md-bg-video" autoplay loop muted playsinline poster="{{ url_for('static', filename='video_poster.jpg') }}">
    <source src="{{ url_for('static', filename='background.mp4') }}" type="video/mp4">
  </video>
  <div class="md-home-ambient"></div>
  <div class="md-home-shell">
    <header class="md-home-hero">
      <img src="{{ url_for('static', filename='Money_drop_logo.png') }}" alt="Money Drop" class="md-home-logo" />
      {# Titre supprimé, on garde juste le logo #}
      <div class="md-home-subtitle">Place tes jetons, défie la banque !</div>
    </header>
    <main class="md-menu-layout">
      <div class="md-menu-card" id="menu-main">
        <button type="button" class="md-menu-btn md-menu-btn-main" id="btnMulti">Multijoueur</button>
      </div>
      <div class="md-menu-card" id="menu-solo" style="display:none">
        <form id="soloForm" class="form" method="post" action="/start">
          <label>Nom du joueur</label>
          <input name="name" required placeholder="Ex: Alice" autocomplete="nickname" />
          <button class="md-menu-btn md-menu-sub" type="submit">Démarrer</button>
        </form>
        <button class="md-menu-btn md-menu-back" id="btnBackSolo">Retour</button>
      </div>
      <div class="md-menu-card" id="menu-multi" style="display:none">
        <button type="button" class="md-menu-btn md-menu-sub" id="btnHost">Héberger un salon</button>
        <button type="button" class="md-menu-btn md-menu-sub" id="btnJoin">Rejoindre un salon</button>
        <button type="button" class="md-menu-btn md-menu-back" id="btnBackMulti">Retour</button>
      </div>
      <div class="md-menu-card" id="menu-host" style="display:none">
        <form id="hostForm" class="form" method="post" action="/lobby/create" autocomplete="off">
          <label>Nom du joueur</label>
          <input name="name" required placeholder="Ex: Alice" value="{{ host_name|default('') }}" autocomplete="off" />
          <label>Mot de passe</label>
          <input name="password" type="password" required placeholder="Mot de passe du salon" autocomplete="off" />
          {% if host_error %}
          <div id="hostPwdError" style="color:#e53935; font-size:13px; margin-top:4px; margin-bottom:8px;">{{ host_error }}</div>
          {% else %}
          <div id="hostPwdError" style="display:none; color:#e53935; font-size:13px; margin-top:4px; margin-bottom:8px;"></div>
          {% endif %}
          <label>Nombre de joueurs</label>
          <input name="size" type="number" min="2" max="50" value="{{ host_size|default('2') }}" />
          <label>Temps / question (sec)</label>
          <input name="time_limit" type="number" min="5" max="120" value="{{ host_time_limit|default('30') }}" />
          <button class="md-menu-btn md-menu-sub" type="submit">Créer et lancer</button>
        </form>
        <button class="md-menu-btn md-menu-back" id="btnBackHost">Retour</button>
      </div>
      <div class="md-menu-card" id="menu-join" style="display:none">
        <div style="margin-bottom: 15px;">
          <label>Nom du joueur</label>
          <input id="joinName" required placeholder="Ex: Alice" autocomplete="off" />
        </div>
        <div style="margin-bottom: 15px;">
          <label>Salons disponibles</label>
          <div id="lobbiesList" style="display: flex; flex-direction: column; gap: 8px; max-height: 250px; overflow-y: auto;">
            <div style="color: var(--muted); text-align: center; padding: 10px;">Chargement...</div>
          </div>
        </div>
        <button class="md-menu-btn md-menu-back" id="btnBackJoin">Retour</button>
      </div>
    </main>
  </div>
  <script src="{{ url_for('static', filename='menu.js') }}"></script>
</body>
</html>
